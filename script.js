let videosInView=new Map;const startVideoPreview=e=>{if(e){e.style.display="block",e.style.opacity="1";let t=e.querySelector("video");t&&(t.currentTime=0,t.play(),t.addEventListener("ended",()=>{t.currentTime=0,t.play()}))}};startVideoPreviewCallback=e=>{let t=e.currentTarget?.querySelector(".video-preview-container");t&&startVideoPreview(t.querySelector("video"))},stopVideoPreview=e=>{if(e){e.style.display="none",e.style.opacity="0";let t=e.querySelector("video");t&&t.pause()}},stopVideoPreviewCallback=e=>{let t=e.currentTarget?.querySelector(".video-preview-container");t&&stopVideoPreview(t.querySelector("video"))},isMobileDevice=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent),callback=(e,t)=>{isMobileDevice()?e.forEach(e=>{let t=e.target.getAttribute("data-media");e.isIntersecting?videosInView.set(t,e):(stopVideoPreview(e.target.querySelector(".video-preview")),videosInView.delete(t));let i=videosInView.values().next().value||e;if(i.isIntersecting){if(!i.target.querySelector(".video-preview-container")){let r=document.createElement("div");r.classList.add("video-preview-container");let d=document.createElement("video");d.addEventListener("loadedmetadata",()=>{console.log("Video dimensions (width, height):",d.videoWidth,d.videoHeight)}),d.setAttribute("class","video-preview"),d.setAttribute("playsinline",""),d.setAttribute("muted",""),t&&(d.src=t),d.autoplay=!0,d.loop=!0,d.muted=!0,d.preload="none",d.type="video/mp4",r.appendChild(d),i.target.appendChild(r)}isMobileDevice()&&startVideoPreview(i.target.querySelector(".video-preview"))}else stopVideoPreview(i.target.querySelector(".video-preview"))}):e.forEach(e=>{let t=e.target.getAttribute("data-media");if(e.isIntersecting){if(!e.target.querySelector(".video-preview-container")){let i=document.createElement("div");i.classList.add("video-preview-container");let r=document.createElement("video");r.addEventListener("loadedmetadata",()=>{console.log("Video dimensions (width, height):",r.videoWidth,r.videoHeight)}),r.setAttribute("class","video-preview"),r.setAttribute("playsinline",""),r.setAttribute("muted",""),t&&(r.src=t),r.autoplay=!0,r.loop=!0,r.muted=!0,r.preload="none",r.type="video/mp4",i.appendChild(r),e.target.appendChild(i)}isMobileDevice()&&startVideoPreview(e.target.querySelector(".video-preview"))}else stopVideoPreview(e.target.querySelector(".video-preview"))})},options={threshold:[.9]},observer_ndvid=new IntersectionObserver(callback,options),(applyEventListners=()=>{document.querySelectorAll(".img-gr").forEach((e,t)=>{e.classList.add("vid-preview-parent"),e.addEventListener("mouseenter",startVideoPreviewCallback),e.addEventListener("mouseleave",stopVideoPreviewCallback),observer_ndvid.observe(e)})})();